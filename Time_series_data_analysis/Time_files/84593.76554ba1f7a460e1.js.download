"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84593],{84593:function(a,b,c){c.r(b),c.d(b,{default:function(){return A}});var d=c(20348),e=c(89703),f=c(17762),g=c(37513),h=c(44620),i=c(10509),j=c(98216),k=c(34099),l=c(36670),m=c(93886),n=c(30833),o=c(52908),p=c(89763),q=c(96566),r=c(23221),s=c(33257),t=c(96865),u=c(41460),v=c(96509);function w(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function x(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){w(a,b,c[b])})}return a}function y(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}var z=function(a){return!!["/enterprise/demos/demo-1","/enterprise/demos/demo-2",].filter(function(b){return a.includes(b)}).length},A=function(){var a,b,c,w,A,B,C,D,E,F,G,H,I,J,K,L,M=(0,f.ix)(function(a){var b,c;return null===(b=a.user)|| void 0===b?void 0:null===(c=b.info)|| void 0===c?void 0:c.loading}),N=(0,f.ix)(function(a){var b,c,d,e,f;return(null===(b=a.user)|| void 0===b?void 0:null===(c=b.info)|| void 0===c?void 0:null===(d=c.data)|| void 0===d?void 0:d.user_id)&&(null===(e=a.user)|| void 0===e?void 0:null===(f=e.info)|| void 0===f?void 0:f.loaded)});return w=(a={googleAccountConfigs:{client_id:(0,l.ZP)()||(0,l.a8)()?n.iOS.DEVELOPMENT:n.iOS.PRODUCTION,cancel_on_tap_outside:!1,context:"signin",prompt_parent_id:"g_id_onload"}}).googleAccountConfigs,E=(A="https://accounts.google.com/gsi/client",C=(B=(0,e.useState)(A?"loading":"idle"))[0],D=B[1],(0,e.useEffect)(function(){if(!A){D("idle");return}var a=document.querySelector('script[src="'.concat(A,'"]'));if(a)D(a.getAttribute("data-status")||"idle");else{(a=document.createElement("script")).src=A,a.async=!0,a.setAttribute("data-status","loading"),document.body.appendChild(a);var b=function(b){a&&a.setAttribute("data-status","load"===b.type?"ready":"error")};a.addEventListener("load",b),a.addEventListener("error",b)}var c=function(a){D("load"===a.type?"ready":"error")};return a.addEventListener("load",c),a.addEventListener("error",c),function(){a&&(a.removeEventListener("load",c),a.removeEventListener("error",c))}},[A]),C),F=(0,f.ix)(function(a){var b,c;return null===(b=a.user)|| void 0===b?void 0:null===(c=b.info)|| void 0===c?void 0:c.loggedOut}),G=(0,f.ix)(function(a){var b,c;return null===(b=a.user)|| void 0===b?void 0:null===(c=b.info)|| void 0===c?void 0:c.loaded}),H=(0,f.ix)(function(a){var b,c,d;return null===(b=a.user)|| void 0===b?void 0:null===(c=b.info)|| void 0===c?void 0:null===(d=c.data)|| void 0===d?void 0:d.user_id}),I=(0,k.useRouter)(),J=(0,f.ix)(function(a){return a.userConfig}),K=(0,f.TL)(),L=!z(I.pathname)&&((0,l.hN)()&&(0,m.gx)(null===(b=J.data)|| void 0===b?void 0:b.constants[n.zj2.ENABLE_SOCIAL_LOGIN_BETA])||(0,m.gx)(null===(c=J.data)|| void 0===c?void 0:c.constants[n.zj2.ENABLE_SOCIAL_LOGIN])),(0,e.useEffect)(function(){try{if(window.google&&"ready"===E){var a,b,c;null===(a=window.google)|| void 0===a||null===(b=a.accounts)|| void 0===b||null===(c=b.id)|| void 0===c||c.initialize(y(x({},w),{callback:function(a){return function(a,b,c){c(t.n.close());var d,e=null==window?void 0:null===(d=window.location)|| void 0===d?void 0:d.pathname;if(!a.credential)throw Error("Couldn't get id token from Google");var f=(null==e?void 0:e.includes("/login/holiday_campaign"))?"/unlimited":(null==e?void 0:e.includes("/login"))||(null==e?void 0:e.includes("signup"))?"/":null!=e?e:"/";(0,g.Z)({url:"/api/google-otl/return",type:"POST",data:y(x({token:a.credential,referral_site:(0,q.Ar)(),last_referral_site:(0,q.rT)(),referral_code:(0,r.I)()},(0,s.We)(),(0,s.bB)()),{impact_click_id:(0,v.iZ)()})}).then(function(a){var d=JSON.parse(a);if(302===d.status){b.push(d.location);return}!0===d.login_successful?(c((0,u.BL)()),document.documentElement.style.removeProperty("--loggedout-true"),document.documentElement.style.setProperty("--loggedout-false","none"),h.Z.dispatch(i.V.load()),h.Z.dispatch(j.s.load()),b.push(f),(0,p.qP)(d.operation===n.WHI.OPERATION.LOGIN?p.f2.LOGIN:p.f2.SIGNUP,d.operation===n.WHI.OPERATION.LOGIN?p.bt.LOGIN_SUCCEEDED:p.bt.SIGNUP_SUCCEEDED,"GOOGLE_OTL")):((0,p.qP)(d.operation===n.WHI.OPERATION.LOGIN?p.f2.LOGIN:p.f2.SIGNUP,d.operation===n.WHI.OPERATION.LOGIN?p.bt.LOGIN_FAILED:p.bt.SIGNUP_FAILED,"GOOGLE_OTL"),b.push("/login"))})}(a,I,K)}}))}}catch(d){(0,o.u)(d)}},[E]),(0,e.useEffect)(function(){try{var a,b,c,d,e,f,g,h;if(H&&(null==window||null===(a=window.google)|| void 0===a||null===(b=a.accounts)|| void 0===b||null===(c=b.id)|| void 0===c||null===(d=c.cancel)|| void 0===d||d.call(c)),!F&&!G||H&&G)return;"ready"===E&&L&&(null===(e=window.google)|| void 0===e||null===(f=e.accounts)|| void 0===f||null===(g=f.id)|| void 0===g||null===(h=g.prompt)|| void 0===h||h.call(g))}catch(i){(0,o.u)(i)}},[E,G,H,F,L]),(0,e.useEffect)(function(){var a,b,c,d;z(I.pathname)&&(null==window||null===(a=window.google)|| void 0===a||null===(b=a.accounts)|| void 0===b||null===(c=b.id)|| void 0===c||null===(d=c.cancel)|| void 0===d||d.call(c))},[I]),M||N?null:(0,d.jsx)("div",{id:"g_id_onload","data-prompt_parent_id":"g_id_onload",className:"fixed right-2 top-18 z-50"})}}}])
//# sourceMappingURL=84593.76554ba1f7a460e1.js.map